"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),i=0;i<r;){var s;i in o&&(s=o[i],e.call(n,s,i,o)),i++}}),Array.from||(Array.from=function(){var t=Object.prototype.toString,l=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},i=Math.pow(2,53)-1,u=function(e){var t,n=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(n,0),i)};return function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!l(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var o,r=u(t.length),s=l(this)?Object(new this(r)):new Array(r),a=0;a<r;)o=t[a],s[a]=i?void 0===n?i(o,a):i.call(n,o,a):o,a+=1;return s.length=r,s}}()),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.appendChild(n)}})}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(n,this.firstChild)}})});var IoUtilities=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"windowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}},{key:"windowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"width",value:function(e,t){if(void 0===t)return e.clientWidth||0;e.style.width=Number.isInteger(t)?t+"px":t}},{key:"height",value:function(e,t){if(void 0===t)return e.clientHeight||0;e.style.height=Number.isInteger(t)?t+"px":t}},{key:"heightContent",value:function(e){var t=window.getComputedStyle(e);if("none"==t.display||"0px"==t.height||"0px"==t.maxHeight){var n={display:e.style.display,height:e.style.height,maxHeight:e.style.maxHeight};e.style.display="block",e.style.height="auto",e.style.maxHeight="none"}var i=e.clientHeight||0;return void 0!==n&&(e.style.display=n.display||"",e.style.height=n.height||"",e.style.maxHeight=n.maxHeight||""),i}},{key:"prefixClass",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.config.prefix;return t?t+e:e}},{key:"addClass",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;e.classList.add(this.prefixClass(t,n))}},{key:"removeClass",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;e.classList.remove(this.prefixClass(t,n))}},{key:"toggleClass",value:function(e,t){2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)}},{key:"hasClass",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.config.prefix;return e.classList.contains(this.prefixClass(t,n))}},{key:"addChild",value:function(e,t,n,i){var o="string"==typeof e?document.createElement(e):e;if(n)for(var r in n)o.setAttribute(r,n[r]);return this.attr(o,n),"prepend"===i||"top"===i?t.prepend(o):"append"!==i&&"bottom"!==i||t.append(o),o}},{key:"attr",value:function(e,t,n){if(void 0===n&&"object"==_typeof(t))for(var i in t)e.setAttribute(i,t[i]);else"string"==typeof t&&n?e.setAttribute(t,n):this.log("attr()","wrong arguments given. Use attr(element, prop, val) or attr(element, { prop: val, ... }) instead.")}},{key:"css",value:function(e,t,n){if(void 0===n&&"object"==_typeof(t))for(var i in t)e.style[i]=t[i];else"string"==typeof t&&n?e.style[t]=n:this.log("css()","wrong arguments given. Use css(element, prop, val) or css(element, { prop: val, ... }) instead.")}},{key:"wrap",value:function(e,t){var n="string"==typeof t||void 0===t?document.createElement(t||"div"):t;return e.parentNode.insertBefore(n,e),n.appendChild(e),n}},{key:"prependTo",value:function(e,t,n){return this.addChild(e,t,n||{},"top")}},{key:"appendTo",value:function(e,t,n){return this.addChild(e,t,n||{},"bottom")}},{key:"next",value:function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}},{key:"prev",value:function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}},{key:"elements",value:function(e){return"string"==typeof e?Array.from(document.querySelectorAll(e)):"NodeList"==e.constructor.name?Array.from(e):[e]}},{key:"elementsEach",value:function(e,t){var n=this.elements(e);return n.forEach(t),n}},{key:"elementsClone",value:function(e,i){var o=this,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return this.elementsEach(e||this.config.elements,function(e){var t=e.cloneNode(!0),n=Array.from(t.classList);r&&(n.forEach(function(e){t.classList.remove(e),t.classList.add(o.config.prefix+e)}),t.id&&(t.id=o.config.prefix+t.id)),o.addClass(e,"source"),o.addClass(t,o.config.prefix+"target"),i.append(t)})}},{key:"elementsTarget",value:function(e,t){}},{key:"elementsFilter",value:function(e){}},{key:"elementBreakpoint",value:function(e){}},{key:"on",value:function(e,t,n){t?this.elementsEach(e,function(e){e._events="object"===_typeof(e._events)?e._events:{},e._events[t]=Array.isArray(e._events[t])?e._events[t]:[],e._events[t].push(n),e.addEventListener(t,n)}):this.error("on()",e+" - 2nth argument (eventName) is missing.")}},{key:"off",value:function(e,n,i){n?this.elementsEach(e,function(t){t._events[n]=i?(t.removeEventListener(n,i),t._events[n].filter(function(e){return e.toString()!=i.toString()})):(t._events[n].forEach(function(e){return t.removeEventListener(n,e)}),[])}):this.error("off()",e+" - 2nth argument (eventName) is missing.")}},{key:"log",value:function(e){if(this.config.debug){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(t=console).log.apply(t,["string"==typeof e&&i.length?this.name+"."+e+":":e].concat(i))}}},{key:"logAll",value:function(){this.config.debug&&(console.groupCollapsed(this.name+" (settings)"),this.log("config",this.config),void 0!==this._eventListObject&&this.log("events",this._eventListObject("/"+this.name+"/")),this.log("ui",this.ui),console.groupEnd())}},{key:"error",value:function(e){if(this.config.debug){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(t=console).error.apply(t,["string"==typeof e&&i.length?this.name+"."+e+":":e].concat(i))}}}]),e}(),Io=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this))).options=t,e.config={},e.ui={},e.body=document.body,e.html=document.documentElement,e.name="io",e.defaults={prefix:e.name+"-",mqlQuery:!1,elements:[],debug:!1},_extends(e.config,e.defaults,e.options),window.io_events||(window.io_events={}),e}return _inherits(n,IoUtilities),_createClass(n,[{key:"mqlManager",value:function(e,t,n){var i=t||this.config.mqlQuery,o=this._mqlQuery(i),r=this._mqlMatch(o);r._fn=n,r._path=this._eventPath(e),r.addListener(this._mqlHandler),n.call(this,r),this.sub(e,n,{_mql:r})}},{key:"mqlManagerRemove",value:function(e){e?(io._eventListValuesData(e).forEach(function(e){e.removeListener(e._fn)}),this.unsub(e)):this.error("mqlManagerRemove","No path argument specified or empty")}},{key:"_mqlMatch",value:function(e){return window.matchMedia(e)}},{key:"_mqlQuery",value:function(e){var t="";for(var n in e)e[n]&&(0!=t.length&&(t+=" and "),t+="("+n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+": "+e[n]+")");return t}},{key:"_mqlHandler",value:function(e){e?this&&this._path?io.pub(this._path,e):e._path?io.pub(e._path,e):io.log("_mqlHandler()","No _path defined"):io.log("_mqlHandler()","mql argument is undefined")}},{key:"pub",value:function(t){for(var n=this,e=arguments.length,i=new Array(1<e?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];setTimeout(function(){var e=n._eventPath(t);void 0!==window.io_events[e]?n._eventListValuesFunctions(e).forEach(function(e){"function"==typeof e?e.apply(n,i):"function"==typeof e[0]?e[0].apply(n,i):n.log("pub()",e+"is not a function.")}):n.log("pub()",e+" does not exist (yet).")},0)}},{key:"sub",value:function(e,t,n){var i=this._eventPath(e);"function"==typeof t?(window.io_events[i]=void 0===window.io_events[i]?{}:window.io_events[i],Array.isArray(window.io_events[i]._fn)||(window.io_events[i]._fn=[]),n&&("object"===_typeof(n)?"object"===_typeof(window.io_events[i]._data)?_extends(window.io_events[i]._data,n):window.io_events[i]._data=n:this.error("sub()",i+" - the data argument has to be of the type object {}")),window.io_events[i]._fn.push(t)):this.error("sub()",i+" - 2nth argument needs to be a function.")}},{key:"unsub",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._eventPath(e);void 0!==window.io_events[n]?t&&void 0!==window.io_events[n]._fn?window.io_events[n]._fn=window.io_events[n]._fn.filter(function(e){return e.toString()!=t.toString()}):this._eventListKeys(n).forEach(function(e){delete window.io_events[e]}):this.log("unsub()",n+" does not exist.")}},{key:"_eventListKeys",value:function(e){var t=[];for(var n in window.io_events)e&&0!==n.lastIndexOf(e,0)||t.push(n);return t}},{key:"_eventListObject",value:function(e){if(e){var t={};return this._eventListKeys(e).forEach(function(e){t[e]=window.io_events[e]}),t}return window.io_events}},{key:"_eventListValues",value:function(n,i){var o=[];return this._eventListKeys(n).forEach(function(e){if(!n||void 0!==window.io_events[e][i])if(Array.isArray(window.io_events[e][i]))window.io_events[e][i].forEach(function(e){return o.push(e)});else if("object"===_typeof(window.io_events[e][i]))for(var t in window.io_events[e][i])o.push(window.io_events[e][i][t]);else o.push(window.io_events[e][i])}),o}},{key:"_eventListValuesFunctions",value:function(e){return this._eventListValues(e,"_fn")}},{key:"_eventListValuesData",value:function(e){return this._eventListValues(e,"_data")}},{key:"_eventPath",value:function(e){return("io"!=this.name&&-1===e.lastIndexOf("/"+this.name+"/",0)?"/"+this.name:"")+("/"==e.charAt(0)?"":"/")+e+("/"==e.charAt(e.length-1)?"":"/")}}]),n}(),io=new Io,IoAccordion=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t))).name="ioaccordion",e.defaults={prefix:e.name+"-",accToggle:".ioaccordion-toggle",accContent:".ioaccordion-content",accContainer:!1},_extends(e.config,e.defaults,e.options),e.sub("/init/",e.init),e.sub("/open/",e.openAccordion),e.sub("/close/",e.closeAccordion),e.pub("/init/"),e}return _inherits(n,Io),_createClass(n,[{key:"init",value:function(){var a=this;this.ui.accContainer=this.config.accContainer?this.elements(this.config.accContainer):[this.body],this.ui.accContent=[],this.ui.accToggle=[],this.ui.accContainer.forEach(function(e,t){var o=e.querySelectorAll(a.config.accToggle),r=e.querySelectorAll(a.config.accContent),s=[];a.config.debug&&(a.ui.accContent.push(r),a.ui.accToggle.push(o)),o.length!=r.length&&a.log("init()[WARNING]","Different amounts of Accordion Togglers Vs. Contents.","\naccToggles: ",o,"\naccContents: ",r),r.forEach(function(e){var t=a.wrap(e);t.style.maxHeight=0,a.addClass(t,"content-wrapper"),s.push(t)}),o.forEach(function(t,n){var e=r[n].parentNode,i=a.heightContent(e);a.on(t,"click",function(e){o.forEach(function(e){t!=e?a.pub("/close/",e):a.pub("/open/",e)}),s.forEach(function(e,t){e.style.maxHeight=n==t?(a.toggleClass(e,"-active"),0==a.height(e)?i+"px":0):(a.removeClass(e,"-active"),0)})})})}),this.logAll()}},{key:"openAccordion",value:function(e){this.toggleClass(e,"-active")}},{key:"closeAccordion",value:function(e){this.removeClass(e,"-active")}}]),n}(),IoNav=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t))).name="ionav",e.defaults={prefix:e.name+"-",mqlQuery:{minWidth:"0px",maxWidth:"1024px"},elementsNav:[],elementsNavCollapsable:!0,buttonTarget:document.body,buttonElement:"div",theme:"default"},_extends(e.config,e.defaults,e.options),e.sub("/init/",e.init),e.pub("/init/"),e}return _inherits(n,Io),_createClass(n,[{key:"init",value:function(){var t=this;this.ui.btn=this.prependTo("string"==typeof buttonElement?"div":this.config.buttonElement,this.config.buttonTarget),this.ui.overlay=this.prependTo("div",this.body,{class:this.config.prefix+"overlay"}),this.ui.canvas=this.prependTo("div",this.ui.overlay,{class:this.config.prefix+"canvas"}),this.addClass(this.ui.btn,"btn"),this.addClass(this.html,"-closed"),this.sub("/initOverlay/",this.initOverlay),this.sub("/initElementsNav/",this.elementsNav),this.sub("/openOverlay/",this.openOverlay),this.sub("/closeOverlay/",this.closeOverlay),this.sub("/toggleOverlay/",this.toggleOverlay),this.sub("/destroyOverlay/",this.destroyOverlay),this.sub("/destroyAll/",this.destroyAll),this.mqlManager("/mqlMain/",this.config.mqlQuery,function(e){e.matches?t.addClass(t.html,"-active"):(t.closeOverlay(),t.removeClass(t.html,"-active"))}),this.pub("/initOverlay/",this.config.elements),this.pub("/initElementsNav/",this.config.elementsNav),this.on(this.ui.btn,"click",function(){return t.pub("/toggleOverlay/")}),this.on(this.ui.overlay,"click",function(e){e.target===e.currentTarget&&t.pub("/closeOverlay/")}),this.logAll()}},{key:"destroyAll",value:function(){for(var e in this.log("destroyAll()","Destroying all events and elements"),this.ui)this.ui[e].remove();this.ui={},this.unsub(this.name)}},{key:"destroyOverlay",value:function(){this.log("destroyOverlay()","Destroying Overlay and Canvas"),this.unsub("/initOverlay/"),this.ui.canvas.remove(),this.ui.overlay.remove(),delete this.ui.canvas,delete this.ui.overlay}},{key:"initOverlay",value:function(e){this.log("initOverlay()","Initializing Overlay"),this.elementsClone(e,this.ui.canvas)}},{key:"toggleOverlay",value:function(){this.log("toggleOverlay()","Toggling Overlay"),this.hasClass(this.html,"-open")?this.pub("/closeOverlay/"):this.pub("/openOverlay/")}},{key:"openOverlay",value:function(){this.log("openOverlay()","Opening Overlay"),this.addClass(this.html,"-open"),this.removeClass(this.html,"-closed")}},{key:"closeOverlay",value:function(){this.log("closeOverlay()","Closing Overlay"),this.removeClass(this.html,"-open"),this.addClass(this.html,"-closed")}},{key:"elementsNav",value:function(e){var o=this;document.querySelectorAll(e).forEach(function(e){e.querySelectorAll("ul li").forEach(function(t){var n=!1,i=!1;t.childNodes.forEach(function(e){"A"==e.tagName&&(n=e),"UL"==e.tagName&&(i=e),"A"!=e.tagName&&"UL"!=e.tagName||o.addClass(e,"-hasSubnav")}),n&&i&&(o.addClass(t,"-hasSubnav"),o.on(n,"click",function(e){e.preventDefault(),o.toggleClass(t,"-active"),o.toggleClass(n,"-active"),o.toggleClass(i,"-active")}))})})}}]),n}();
//# sourceMappingURL=io.min.js.map
